services:
  electric:
    image: electricsql/electric:latest
    container_name: electric-tanstack-db
    environment:
      DATABASE_URL: "postgresql://user:password@host.docker.internal:5432/postgres"
      ELECTRIC_INSECURE: "true"
      ELECTRIC_CORS_ALLOWED_ORIGINS: "http://localhost:5173,http://localhost:5174,http://localhost:5175"
    ports:
      - "30000:3000"
    extra_hosts:
      - "host.docker.internal:host-gateway"
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:3000/v1/health"]
      interval: 10s
      timeout: 5s
      retries: 5
      start_period: 10s
